{"level":"error","message":"cleanup function failed getRedisClient.disconnect is not a function","stack":"TypeError: getRedisClient.disconnect is not a function\n    at file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/index.js:60:29\n    at process.shutdown (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/utils/setupGracefulShutdown.js:8:23)\n    at process.emit (node:events:520:28)","timestamp":"2025-10-08T05:53:51.325Z"}
{"client":{"_connected":true,"_connecting":false,"_connectionCallback":null,"_connectionError":false,"_connectionTimeoutMillis":20000,"_ended":true,"_ending":true,"_events":{},"_eventsCount":1,"_poolUseCount":3,"_queryable":false,"_types":{"_types":{"arrayParser":{},"builtins":{"ABSTIME":702,"ACLITEM":1033,"BIT":1560,"BOOL":16,"BPCHAR":1042,"BYTEA":17,"CHAR":18,"CID":29,"CIDR":650,"CIRCLE":718,"DATE":1082,"FLOAT4":700,"FLOAT8":701,"GTSVECTOR":3642,"INET":869,"INT2":21,"INT4":23,"INT8":20,"INTERVAL":1186,"JSON":114,"JSONB":3802,"MACADDR":829,"MACADDR8":774,"MONEY":790,"NUMERIC":1700,"OID":26,"PATH":602,"PG_DEPENDENCIES":3402,"PG_LSN":3220,"PG_NDISTINCT":3361,"PG_NODE_TREE":194,"POLYGON":604,"REFCURSOR":1790,"REGCLASS":2205,"REGCONFIG":3734,"REGDICTIONARY":3769,"REGNAMESPACE":4089,"REGOPER":2203,"REGOPERATOR":2204,"REGPROC":24,"REGPROCEDURE":2202,"REGROLE":4096,"REGTYPE":2206,"RELTIME":703,"SMGR":210,"TEXT":25,"TID":27,"TIME":1083,"TIMESTAMP":1114,"TIMESTAMPTZ":1184,"TIMETZ":1266,"TINTERVAL":704,"TSQUERY":3615,"TSVECTOR":3614,"TXID_SNAPSHOT":2970,"UUID":2950,"VARBIT":1562,"VARCHAR":1043,"XID":28,"XML":142}},"binary":{},"text":{}},"activeQuery":null,"binary":false,"connection":{"_connecting":true,"_emitMessage":false,"_ending":true,"_events":{},"_eventsCount":23,"_keepAlive":false,"_keepAliveInitialDelayMillis":0,"lastBuffer":false,"parsedStatements":{},"ssl":{},"stream":{"_SNICallback":null,"_closeAfterHandlingError":false,"_controlReleased":true,"_events":{"end":[null,null],"newListener":[null,null]},"_eventsCount":6,"_hadError":false,"_host":null,"_newSessionPending":false,"_parent":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"error":[null,null]},"_eventsCount":4,"_hadError":false,"_host":"ep-broad-king-a48rk492-pooler.us-east-1.aws.neon.tech","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"awaitDrainWriters":null,"buffer":[],"bufferIndex":0,"highWaterMark":16384,"length":0,"pipes":[]},"_server":null,"_sockname":null,"_writableState":{"bufferedIndex":0,"corked":0,"highWaterMark":16384,"length":0,"pendingcb":0,"writelen":0},"allowHalfOpen":false,"autoSelectFamilyAttemptedAddresses":["34.194.100.28:5432"],"connecting":false,"server":null},"_pendingData":null,"_pendingEncoding":"","_readableState":{"awaitDrainWriters":null,"buffer":[],"bufferIndex":0,"highWaterMark":16384,"length":0,"pipes":[]},"_rejectUnauthorized":true,"_requestCert":true,"_secureEstablished":true,"_securePending":false,"_server":null,"_sockname":null,"_tlsOptions":{"isServer":false,"pipe":false,"rejectUnauthorized":true,"requestCert":true,"secureContext":{"context":{}}},"_writableState":{"bufferedIndex":0,"corked":0,"highWaterMark":16384,"length":0,"pendingcb":0,"writelen":0},"allowHalfOpen":false,"alpnProtocol":false,"authorizationError":null,"authorized":true,"connecting":false,"encrypted":true,"secureConnecting":false,"servername":"ep-broad-king-a48rk492-pooler.us-east-1.aws.neon.tech","ssl":null}},"connectionParameters":{"binary":false,"client_encoding":"","connect_timeout":20,"database":"ecomDB","host":"ep-broad-king-a48rk492-pooler.us-east-1.aws.neon.tech","idle_in_transaction_session_timeout":false,"isDomainSocket":false,"lock_timeout":false,"port":5432,"query_timeout":false,"ssl":{},"statement_timeout":false,"user":"neondb_owner"},"connectionTimeoutHandle":{"_destroyed":true,"_idleNext":null,"_idlePrev":null,"_idleStart":295877,"_idleTimeout":-1,"_onTimeout":null,"_repeat":null},"database":"ecomDB","enableChannelBinding":false,"hasExecuted":true,"host":"ep-broad-king-a48rk492-pooler.us-east-1.aws.neon.tech","port":5432,"processID":875330464,"queryQueue":[],"readyForQuery":true,"saslSession":null,"secretKey":1620002045,"ssl":{},"user":"neondb_owner"},"level":"error","message":"Unexpected error on idle db client Connection terminated unexpectedly","stack":"Error: Connection terminated unexpectedly\n    at Connection.<anonymous> (C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\pg\\lib\\client.js:136:73)\n    at Object.onceWrapper (node:events:634:28)\n    at Connection.emit (node:events:520:28)\n    at Socket.<anonymous> (C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\pg\\lib\\connection.js:62:12)\n    at Socket.emit (node:events:532:35)\n    at TCP.<anonymous> (node:net:337:12)","timestamp":"2025-10-08T15:36:59.262Z"}
{"code":"ESOCKET","command":"CONN","level":"error","message":"Error in sending OTP mail to user rupesh21092004@gmail.com unable to get local issuer certificate","stack":"Error: unable to get local issuer certificate\n    at TLSSocket.onConnectSecure (node:_tls_wrap:1679:34)\n    at TLSSocket.emit (node:events:520:28)\n    at TLSSocket._finishInit (node:_tls_wrap:1078:8)\n    at ssl.onhandshakedone (node:_tls_wrap:864:12)","timestamp":"2025-10-09T04:42:08.435Z"}
{"cause":{},"level":"error","message":"Postgres QUERY error:SELECT * FROM users WHERE EMAIL=$1 Connection terminated due to connection timeout","stack":"Error: Connection terminated due to connection timeout\n    at C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async pgQuery (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/config/dbconnection.js:19:24)\n    at async findUserByEmail (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/model/userModel.js:4:18)\n    at async loginUserService (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/services/authService.js:90:29)","timestamp":"2025-10-13T03:41:26.501Z"}
{"cause":{},"level":"error","message":"Error caught at Login Step:\n Connection terminated due to connection timeout","stack":"Error: Connection terminated due to connection timeout\n    at C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async pgQuery (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/config/dbconnection.js:19:24)\n    at async findUserByEmail (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/model/userModel.js:4:18)\n    at async loginUserService (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/services/authService.js:90:29)","timestamp":"2025-10-13T03:41:26.515Z"}
{"level":"error","message":"cleanup function failed getRedisClient.disconnect is not a function","stack":"TypeError: getRedisClient.disconnect is not a function\n    at file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/index.js:60:29\n    at process.shutdown (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/utils/setupGracefulShutdown.js:8:23)\n    at process.emit (node:events:520:28)","timestamp":"2025-10-13T03:42:07.590Z"}
{"code":"ECONNRESET","errno":-4077,"level":"error","message":"Postgres QUERY error:SELECT * FROM users WHERE EMAIL=$1 read ECONNRESET","stack":"Error: read ECONNRESET\n    at C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async pgQuery (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/config/dbconnection.js:19:24)\n    at async findUserByEmail (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/model/userModel.js:4:18)\n    at async registerUserWithOAuthService (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/services/authService.js:50:30)","syscall":"read","timestamp":"2025-10-13T06:29:55.594Z"}
{"code":"ECONNRESET","errno":-4077,"level":"error","message":"Error while logging with Google Oauth2 read ECONNRESET","stack":"Error: read ECONNRESET\n    at C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async pgQuery (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/config/dbconnection.js:19:24)\n    at async findUserByEmail (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/model/userModel.js:4:18)\n    at async registerUserWithOAuthService (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/services/authService.js:50:30)","syscall":"read","timestamp":"2025-10-13T06:29:55.597Z"}
{"level":"error","message":"Error connecting postgres: result.rows[0].now is not a function","stack":"TypeError: result.rows[0].now is not a function\n    at pgConnectTest (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/config/dbconnection.js:32:71)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/utils/setupHealthcheckUp.js:18:13","timestamp":"2025-10-21T03:48:58.024Z"}
{"code":"ECONNRESET","errno":-4077,"level":"error","message":"Redis SET error for key session:c64e68e9-42d3-4a91-893c-025e3749a576: read ECONNRESET","stack":"Error: read ECONNRESET\n    at TCP.onStreamRead (node:internal/stream_base_commons:218:20)","syscall":"read","timestamp":"2025-10-22T03:45:39.096Z"}
{"client":{"_connected":true,"_connecting":false,"_connectionCallback":null,"_connectionError":false,"_connectionTimeoutMillis":20000,"_ended":true,"_ending":true,"_events":{},"_eventsCount":1,"_poolUseCount":7,"_queryable":false,"_types":{"_types":{"arrayParser":{},"builtins":{"ABSTIME":702,"ACLITEM":1033,"BIT":1560,"BOOL":16,"BPCHAR":1042,"BYTEA":17,"CHAR":18,"CID":29,"CIDR":650,"CIRCLE":718,"DATE":1082,"FLOAT4":700,"FLOAT8":701,"GTSVECTOR":3642,"INET":869,"INT2":21,"INT4":23,"INT8":20,"INTERVAL":1186,"JSON":114,"JSONB":3802,"MACADDR":829,"MACADDR8":774,"MONEY":790,"NUMERIC":1700,"OID":26,"PATH":602,"PG_DEPENDENCIES":3402,"PG_LSN":3220,"PG_NDISTINCT":3361,"PG_NODE_TREE":194,"POLYGON":604,"REFCURSOR":1790,"REGCLASS":2205,"REGCONFIG":3734,"REGDICTIONARY":3769,"REGNAMESPACE":4089,"REGOPER":2203,"REGOPERATOR":2204,"REGPROC":24,"REGPROCEDURE":2202,"REGROLE":4096,"REGTYPE":2206,"RELTIME":703,"SMGR":210,"TEXT":25,"TID":27,"TIME":1083,"TIMESTAMP":1114,"TIMESTAMPTZ":1184,"TIMETZ":1266,"TINTERVAL":704,"TSQUERY":3615,"TSVECTOR":3614,"TXID_SNAPSHOT":2970,"UUID":2950,"VARBIT":1562,"VARCHAR":1043,"XID":28,"XML":142}},"binary":{},"text":{}},"activeQuery":null,"binary":false,"connection":{"_connecting":true,"_emitMessage":false,"_ending":true,"_events":{},"_eventsCount":23,"_keepAlive":false,"_keepAliveInitialDelayMillis":0,"lastBuffer":false,"parsedStatements":{},"ssl":{},"stream":{"_SNICallback":null,"_closeAfterHandlingError":false,"_controlReleased":true,"_events":{"end":[null,null],"newListener":[null,null]},"_eventsCount":6,"_hadError":false,"_host":null,"_newSessionPending":false,"_parent":{"_closeAfterHandlingError":false,"_events":{"close":[null,null,null],"error":[null,null]},"_eventsCount":4,"_hadError":false,"_host":"ep-broad-king-a48rk492-pooler.us-east-1.aws.neon.tech","_parent":null,"_pendingData":null,"_pendingEncoding":"","_readableState":{"awaitDrainWriters":null,"buffer":[],"bufferIndex":0,"highWaterMark":16384,"length":0,"pipes":[]},"_server":null,"_sockname":null,"_writableState":{"bufferedIndex":0,"corked":0,"highWaterMark":16384,"length":0,"pendingcb":0,"writelen":0},"allowHalfOpen":false,"autoSelectFamilyAttemptedAddresses":["34.194.100.28:5432"],"connecting":false,"server":null},"_pendingData":null,"_pendingEncoding":"","_readableState":{"awaitDrainWriters":null,"buffer":[],"bufferIndex":0,"highWaterMark":16384,"length":0,"pipes":[]},"_rejectUnauthorized":true,"_requestCert":true,"_secureEstablished":true,"_securePending":false,"_server":null,"_sockname":null,"_tlsOptions":{"isServer":false,"pipe":false,"rejectUnauthorized":true,"requestCert":true,"secureContext":{"context":{}}},"_writableState":{"bufferedIndex":0,"corked":0,"highWaterMark":16384,"length":0,"pendingcb":0,"writelen":0},"allowHalfOpen":false,"alpnProtocol":false,"authorizationError":null,"authorized":true,"connecting":false,"encrypted":true,"secureConnecting":false,"servername":"ep-broad-king-a48rk492-pooler.us-east-1.aws.neon.tech","ssl":null}},"connectionParameters":{"binary":false,"client_encoding":"","connect_timeout":20,"database":"ecomDB","host":"ep-broad-king-a48rk492-pooler.us-east-1.aws.neon.tech","idle_in_transaction_session_timeout":false,"isDomainSocket":false,"lock_timeout":false,"port":5432,"query_timeout":false,"ssl":{},"statement_timeout":false,"user":"neondb_owner"},"connectionTimeoutHandle":{"_destroyed":true,"_idleNext":null,"_idlePrev":null,"_idleStart":100815538,"_idleTimeout":-1,"_onTimeout":null,"_repeat":null},"database":"ecomDB","enableChannelBinding":false,"hasExecuted":true,"host":"ep-broad-king-a48rk492-pooler.us-east-1.aws.neon.tech","port":5432,"processID":-1906617696,"queryQueue":[],"readyForQuery":true,"saslSession":null,"secretKey":659052383,"ssl":{},"user":"neondb_owner"},"level":"error","message":"Unexpected error on idle db client Connection terminated unexpectedly","stack":"Error: Connection terminated unexpectedly\n    at Connection.<anonymous> (C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\pg\\lib\\client.js:136:73)\n    at Object.onceWrapper (node:events:634:28)\n    at Connection.emit (node:events:520:28)\n    at Socket.<anonymous> (C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\pg\\lib\\connection.js:62:12)\n    at Socket.emit (node:events:532:35)\n    at TCP.<anonymous> (node:net:337:12)","timestamp":"2025-10-22T08:15:30.150Z"}
{"code":"ESOCKET","command":"CONN","level":"error","message":"Error in sending OTP mail to user urmila290398@gmail.com unable to get local issuer certificate","stack":"Error: unable to get local issuer certificate\n    at TLSSocket.onConnectSecure (node:_tls_wrap:1679:34)\n    at TLSSocket.emit (node:events:520:28)\n    at TLSSocket._finishInit (node:_tls_wrap:1078:8)\n    at ssl.onhandshakedone (node:_tls_wrap:864:12)","timestamp":"2025-10-22T11:07:45.138Z"}
{"level":"error","message":"Error caught at Login Step:\n data and hash must be strings","stack":"Error: data and hash must be strings\n    at Object.compare (C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\bcrypt\\bcrypt.js:211:17)\n    at C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\bcrypt\\promises.js:26:12\n    at new Promise (<anonymous>)\n    at Object.promise (C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\bcrypt\\promises.js:17:12)\n    at Object.compare (C:\\Code\\ExpenseTrackerApp\\server\\expenseTracker-auth-service\\node_modules\\bcrypt\\bcrypt.js:200:25)\n    at loginUserService (file:///C:/Code/ExpenseTrackerApp/server/expenseTracker-auth-service/src/services/authService.js:96:46)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-10-23T04:01:21.970Z"}
